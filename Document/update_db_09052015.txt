
-- Delete column index in table Products, because same keyword of mysql
USE SALE_WATCH;

ALTER TABLE `products` DROP `INDEX`;

--Thong add 5/13/2015 set default for attribute ACTIVE in table Customer
USE SALE_WATCH;

ALTER TABLE Customers
ALTER ACTIVE SET DEFAULT 0;




ALTER TABLE `customers` CHANGE `CUS_ADDRESS` `CUS_ADDRESS` VARCHAR(200) CHARACTER SET utf8 COLLATE utf8_vietnamese_ci NULL DEFAULT NULL;
ALTER TABLE `customers` CHANGE `CUS_ADDRESS_SHIP` `CUS_ADDRESS_SHIP` VARCHAR(200) CHARACTER SET utf8 COLLATE utf8_vietnamese_ci NULL DEFAULT NULL;
UPDATE `sale_watch`.`products` SET `CATE_ID` = NULL WHERE `products`.`ID` = 8
UPDATE `sale_watch`.`products` SET `CATE_ID` = NULL WHERE `products`.`ID` = 6
UPDATE `sale_watch`.`products` SET `CATE_ID` = NULL WHERE `products`.`ID` = 5
ALTER TABLE products DROP FOREIGN KEY products_ibfk_2;
ALTER TABLE `products` DROP `CATE_ID`;
CREATE TABLE `sale_watch`.`product_category` ( `product_id` INT(10) UNSIGNED NOT NULL , `cate_id` INT(10) UNSIGNED NOT NULL ) ENGINE = InnoDB;
ALTER TABLE `product_category` ADD INDEX(`cateId`);
ALTER TABLE `product_category` ADD INDEX(`productId`);
ALTER TABLE `product_category` ADD CONSTRAINT `to_product_fk1` FOREIGN KEY (`product_id`) REFERENCES `sale_watch`.`products`(`ID`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `product_category` ADD CONSTRAINT `to_cate_fk1` FOREIGN KEY (`cate_id`) REFERENCES `sale_watch`.`category`(`ID`) ON DELETE RESTRICT ON UPDATE RESTRICT;

-- add new column name_unsign by Thong
ALTER TABLE products ADD (name_unsign varchar(255) CHARACTER SET utf8);

ALTER TABLE `category` CHANGE `TITLE` `TITLE` VARCHAR(256) CHARACTER SET utf8 COLLATE utf8_vietnamese_ci NULL DEFAULT NULL;
ALTER TABLE `category` CHANGE `DESCRIPTION` `DESCRIPTION` TEXT CHARACTER SET utf8 COLLATE utf8_vietnamese_ci NULL DEFAULT NULL;
ALTER TABLE `category` CHANGE `KEYWORD` `KEYWORD` VARCHAR(256) CHARACTER SET utf8 COLLATE utf8_vietnamese_ci NULL DEFAULT NULL;

-- changed by Thong on 6/29/2015

ALTER TABLE products MODIFY COLUMN DATE datetime NULL DEFAULT NOW();
ALTER TABLE products MODIFY COLUMN DATE_BEGIN datetime NULL DEFAULT NOW();
ALTER TABLE products MODIFY COLUMN DATE_CREATE datetime NULL DEFAULT NOW();
ALTER TABLE products MODIFY COLUMN AMOUNT int NOT NULL DEFAULT 0;
ALTER TABLE products MODIFY COLUMN AMOUNT_TO_BUY int NOT NULL DEFAULT 0;
ALTER TABLE products MODIFY COLUMN AMOUNT_LIKE int NOT NULL DEFAULT 0;
ALTER TABLE products MODIFY COLUMN PRIORITY smallint(2) NULL DEFAULT 0;
ALTER TABLE products CHANGE COLUMN ACTIVE IS_ACTIVE BIT DEFAULT 1;

-- rename name of columns
ALTER TABLE products CHANGE COLUMN AMOUNT NUMBER int NOT NULL DEFAULT 0;
ALTER TABLE products CHANGE COLUMN AMOUNT_TO_BUY SELL_NUMBER int NOT NULL DEFAULT 0;
ALTER TABLE products CHANGE COLUMN AMOUNT_LIKE LIKE_NUMBER int NOT NULL DEFAULT 0;

ALTER TABLE products CHANGE COLUMN DATE_BEGIN EFFECTIVE_DATE datetime NULL DEFAULT NOW();
ALTER TABLE products CHANGE COLUMN DATE_END EXPIRE_DATE datetime NULL DEFAULT NULL;
ALTER TABLE products CHANGE COLUMN USER_CREATE CREATED_USER varchar(100) NOT NULL DEFAULT 'Admin';
ALTER TABLE products CHANGE COLUMN DATE_CREATE CREATED_DATE datetime NULL DEFAULT NOW();

ALTER TABLE products CHANGE COLUMN BRAND_TAG BRAND_TAG int(10) NULL DEFAULT 0;
ALTER TABLE products CHANGE COLUMN ORD ORD int(10) NULL DEFAULT 0;

-- add new column
ALTER TABLE products
  ADD MODIFIED_DATE datetime NULL DEFAULT NULL;

  
ALTER TABLE products
  ADD MODIFIED_BY VARCHAR(256) NULL DEFAULT NULL;




